# ERD (Entity Relationship Diagram) - Kosabangsa Desa Kaana

## üéØ Overview
Rancangan database untuk website **Kosabangsa Desa Kaana** yang mendukung sistem pembelajaran digital, pemetaan geografis, assessment konseling, dan LMS inkubator bisnis ekonomi maritim.

## üìä Core Entities

### 1. **USERS** (Authentication & Profile)
```sql
users
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ name (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ email (VARCHAR(255), UNIQUE, NOT NULL)
‚îú‚îÄ‚îÄ email_verified_at (TIMESTAMP, NULLABLE)
‚îú‚îÄ‚îÄ password (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ profile_image (VARCHAR(500), NULLABLE)
‚îú‚îÄ‚îÄ phone (VARCHAR(20), NULLABLE)
‚îú‚îÄ‚îÄ address (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ birth_date (DATE, NULLABLE)
‚îú‚îÄ‚îÄ gender (ENUM('male', 'female'), NULLABLE)
‚îú‚îÄ‚îÄ occupation (VARCHAR(100), NULLABLE)
‚îú‚îÄ‚îÄ education_level (VARCHAR(100), NULLABLE)
‚îú‚îÄ‚îÄ role (ENUM('admin', 'instructor', 'student', 'guest'), DEFAULT 'student')
‚îú‚îÄ‚îÄ is_active (BOOLEAN, DEFAULT true)
‚îú‚îÄ‚îÄ remember_token (VARCHAR(100), NULLABLE)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 2. **VILLAGE_INFO** (Informasi Desa)
```sql
village_info
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ name (VARCHAR(255), NOT NULL) -- "Desa Kaana"
‚îú‚îÄ‚îÄ description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ coordinates_lat (DECIMAL(10,8), NOT NULL) -- 5¬∞21'S
‚îú‚îÄ‚îÄ coordinates_lng (DECIMAL(11,8), NOT NULL) -- 102¬∞16'E
‚îú‚îÄ‚îÄ area_size (DECIMAL(8,2), NULLABLE) -- 12.5 km¬≤
‚îú‚îÄ‚îÄ population_total (INT, NULLABLE)
‚îú‚îÄ‚îÄ population_density (INT, NULLABLE) -- 201/km¬≤
‚îú‚îÄ‚îÄ climate (VARCHAR(100), NULLABLE) -- "26-28¬∞C"
‚îú‚îÄ‚îÄ elevation (INT, NULLABLE)
‚îú‚îÄ‚îÄ district (VARCHAR(100), NULLABLE) -- "Enggano"
‚îú‚îÄ‚îÄ regency (VARCHAR(100), NULLABLE) -- "Bengkulu Utara"
‚îú‚îÄ‚îÄ province (VARCHAR(100), NULLABLE) -- "Bengkulu"
‚îú‚îÄ‚îÄ established_year (YEAR, NULLABLE)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 3. **TRANSPORTATION** (Akses Transportasi)
```sql
transportation
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ village_id (FK -> village_info.id)
‚îú‚îÄ‚îÄ type (ENUM('ship', 'speedboat', 'plane'), NOT NULL)
‚îú‚îÄ‚îÄ name (VARCHAR(100), NOT NULL)
‚îú‚îÄ‚îÄ duration (VARCHAR(50), NULLABLE) -- "6-8 jam", "3-4 jam"
‚îú‚îÄ‚îÄ frequency (VARCHAR(100), NULLABLE)
‚îú‚îÄ‚îÄ cost_range (VARCHAR(100), NULLABLE)
‚îú‚îÄ‚îÄ weather_dependent (BOOLEAN, DEFAULT false)
‚îú‚îÄ‚îÄ description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ icon (VARCHAR(50), NULLABLE) -- emoji atau icon class
‚îú‚îÄ‚îÄ is_active (BOOLEAN, DEFAULT true)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

## üéì Learning Management System

### 4. **COURSES** (Program Pembelajaran)
```sql
courses
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ title (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ slug (VARCHAR(255), UNIQUE, NOT NULL)
‚îú‚îÄ‚îÄ description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ short_description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ category (ENUM('maritime_economy', 'fishery', 'business_incubator', 'digital_skills'), NOT NULL)
‚îú‚îÄ‚îÄ level (ENUM('beginner', 'intermediate', 'advanced'), DEFAULT 'beginner')
‚îú‚îÄ‚îÄ duration_hours (INT, NULLABLE)
‚îú‚îÄ‚îÄ thumbnail (VARCHAR(500), NULLABLE)
‚îú‚îÄ‚îÄ background_color (VARCHAR(20), DEFAULT '#3b82f6')
‚îú‚îÄ‚îÄ instructor_id (FK -> users.id)
‚îú‚îÄ‚îÄ status (ENUM('draft', 'published', 'archived'), DEFAULT 'draft')
‚îú‚îÄ‚îÄ is_featured (BOOLEAN, DEFAULT false)
‚îú‚îÄ‚îÄ enrollment_count (INT, DEFAULT 0)
‚îú‚îÄ‚îÄ rating_average (DECIMAL(3,2), DEFAULT 0.00)
‚îú‚îÄ‚îÄ price (DECIMAL(10,2), DEFAULT 0.00)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 5. **COURSE_MODULES** (Modul Pembelajaran)
```sql
course_modules
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ course_id (FK -> courses.id)
‚îú‚îÄ‚îÄ title (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ order_index (INT, NOT NULL)
‚îú‚îÄ‚îÄ duration_minutes (INT, NULLABLE)
‚îú‚îÄ‚îÄ is_locked (BOOLEAN, DEFAULT false)
‚îú‚îÄ‚îÄ prerequisites (JSON, NULLABLE) -- module IDs yang harus diselesaikan
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 6. **LEARNING_MATERIALS** (Materi Pembelajaran)
```sql
learning_materials
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ module_id (FK -> course_modules.id)
‚îú‚îÄ‚îÄ title (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ content_type (ENUM('video', 'text', 'pdf', 'presentation', 'interactive', 'quiz'), NOT NULL)
‚îú‚îÄ‚îÄ content_url (VARCHAR(500), NULLABLE)
‚îú‚îÄ‚îÄ content_text (LONGTEXT, NULLABLE)
‚îú‚îÄ‚îÄ duration_minutes (INT, NULLABLE)
‚îú‚îÄ‚îÄ file_size (BIGINT, NULLABLE)
‚îú‚îÄ‚îÄ order_index (INT, NOT NULL)
‚îú‚îÄ‚îÄ is_downloadable (BOOLEAN, DEFAULT false)
‚îú‚îÄ‚îÄ view_count (INT, DEFAULT 0)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 7. **USER_ENROLLMENTS** (Pendaftaran Kursus)
```sql
user_enrollments
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ user_id (FK -> users.id)
‚îú‚îÄ‚îÄ course_id (FK -> courses.id)
‚îú‚îÄ‚îÄ enrollment_date (TIMESTAMP, NOT NULL)
‚îú‚îÄ‚îÄ completion_date (TIMESTAMP, NULLABLE)
‚îú‚îÄ‚îÄ progress_percentage (DECIMAL(5,2), DEFAULT 0.00)
‚îú‚îÄ‚îÄ current_module_id (FK -> course_modules.id, NULLABLE)
‚îú‚îÄ‚îÄ status (ENUM('enrolled', 'in_progress', 'completed', 'dropped'), DEFAULT 'enrolled')
‚îú‚îÄ‚îÄ certificate_issued (BOOLEAN, DEFAULT false)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)

-- Composite unique key
UNIQUE KEY unique_enrollment (user_id, course_id)
```

### 8. **LEARNING_PROGRESS** (Progress Pembelajaran)
```sql
learning_progress
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ user_id (FK -> users.id)
‚îú‚îÄ‚îÄ material_id (FK -> learning_materials.id)
‚îú‚îÄ‚îÄ enrollment_id (FK -> user_enrollments.id)
‚îú‚îÄ‚îÄ started_at (TIMESTAMP, NULLABLE)
‚îú‚îÄ‚îÄ completed_at (TIMESTAMP, NULLABLE)
‚îú‚îÄ‚îÄ time_spent_minutes (INT, DEFAULT 0)
‚îú‚îÄ‚îÄ status (ENUM('not_started', 'in_progress', 'completed'), DEFAULT 'not_started')
‚îú‚îÄ‚îÄ last_position (INT, DEFAULT 0) -- untuk video/audio
‚îú‚îÄ‚îÄ notes (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

## üß† Assessment & Konseling System

### 9. **ASSESSMENTS** (Tes Konseling & Kesiapan Mental)
```sql
assessments
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ title (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ category (ENUM('career_guidance', 'skill_assessment', 'personality', 'aptitude', 'mental_health', 'ptsd_screening', 'dass21'), NOT NULL)
‚îú‚îÄ‚îÄ assessment_type (ENUM('pcl5', 'dass21', 'career', 'personality', 'custom'), NOT NULL)
‚îú‚îÄ‚îÄ total_questions (INT, NOT NULL)
‚îú‚îÄ‚îÄ time_limit_minutes (INT, NULLABLE)
‚îú‚îÄ‚îÄ scoring_method (ENUM('sum_total', 'weighted', 'subscale', 'categorical'), DEFAULT 'sum_total')
‚îú‚îÄ‚îÄ max_score (INT, NULLABLE) -- 80 for PCL-5, 126 for DASS-21
‚îú‚îÄ‚îÄ threshold_score (DECIMAL(5,2), NULLABLE) -- 33 for PCL-5 probable PTSD
‚îú‚îÄ‚îÄ instructions (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ disclaimer_text (TEXT, NULLABLE) -- Legal disclaimer untuk mental health assessment
‚îú‚îÄ‚îÄ requires_consent (BOOLEAN, DEFAULT false)
‚îú‚îÄ‚îÄ is_active (BOOLEAN, DEFAULT true)
‚îú‚îÄ‚îÄ created_by (FK -> users.id)
‚îú‚îÄ‚îÄ version (VARCHAR(20), DEFAULT '1.0') -- untuk tracking versi assessment
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 10. **ASSESSMENT_QUESTIONS** (Soal Assessment)
```sql
assessment_questions
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ assessment_id (FK -> assessments.id)
‚îú‚îÄ‚îÄ question_text (TEXT, NOT NULL)
‚îú‚îÄ‚îÄ question_code (VARCHAR(20), NULLABLE) -- PCL1, PCL2, DASS1, etc.
‚îú‚îÄ‚îÄ question_type (ENUM('likert_scale', 'multiple_choice', 'single_choice', 'text'), NOT NULL)
‚îú‚îÄ‚îÄ scale_type (ENUM('0_to_4', '0_to_3', '1_to_5', 'custom'), NULLABLE) -- untuk skala Likert
‚îú‚îÄ‚îÄ cluster_category (VARCHAR(100), NULLABLE) -- Re-experiencing, Avoidance, Depression, Anxiety, Stress
‚îú‚îÄ‚îÄ subscale (VARCHAR(50), NULLABLE) -- untuk DASS-21: depression/anxiety/stress
‚îú‚îÄ‚îÄ reverse_scored (BOOLEAN, DEFAULT false) -- untuk pertanyaan yang perlu di-reverse
‚îú‚îÄ‚îÄ weight (DECIMAL(3,2), DEFAULT 1.00)
‚îú‚îÄ‚îÄ order_index (INT, NOT NULL)
‚îú‚îÄ‚îÄ is_required (BOOLEAN, DEFAULT true)
‚îú‚îÄ‚îÄ help_text (TEXT, NULLABLE) -- penjelasan tambahan untuk pertanyaan
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 11. **ASSESSMENT_OPTIONS** (Pilihan Jawaban)
```sql
assessment_options
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ question_id (FK -> assessment_questions.id)
‚îú‚îÄ‚îÄ option_text (TEXT, NOT NULL)
‚îú‚îÄ‚îÄ option_value (INT, NOT NULL) -- 0,1,2,3,4 untuk PCL-5 atau 0,1,2,3 untuk DASS-21
‚îú‚îÄ‚îÄ option_description (VARCHAR(255), NULLABLE) -- "Not at all", "A little bit", etc.
‚îú‚îÄ‚îÄ score_weight (DECIMAL(3,2), DEFAULT 1.00)
‚îú‚îÄ‚îÄ order_index (INT, NOT NULL)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 12. **USER_ASSESSMENTS** (Hasil Assessment User)
```sql
user_assessments
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ user_id (FK -> users.id)
‚îú‚îÄ‚îÄ assessment_id (FK -> assessments.id)
‚îú‚îÄ‚îÄ started_at (TIMESTAMP, NOT NULL)
‚îú‚îÄ‚îÄ completed_at (TIMESTAMP, NULLABLE)
‚îú‚îÄ‚îÄ total_score (DECIMAL(5,2), NULLABLE)
‚îú‚îÄ‚îÄ percentage_score (DECIMAL(5,2), NULLABLE)
‚îú‚îÄ‚îÄ status (ENUM('in_progress', 'completed', 'abandoned'), DEFAULT 'in_progress')
‚îú‚îÄ‚îÄ results_data (JSON, NULLABLE) -- career recommendations, personality profile
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 13. **USER_ANSWERS** (Jawaban User)
```sql
user_answers
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ user_assessment_id (FK -> user_assessments.id)
‚îú‚îÄ‚îÄ question_id (FK -> assessment_questions.id)
‚îú‚îÄ‚îÄ selected_options (JSON, NULLABLE) -- array of option IDs
‚îú‚îÄ‚îÄ text_answer (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ score_earned (DECIMAL(5,2), DEFAULT 0.00)
‚îú‚îÄ‚îÄ answered_at (TIMESTAMP, NOT NULL)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

## üè¢ Business Incubator System

### 14. **BUSINESS_PROGRAMS** (Program Inkubator Bisnis)
```sql
business_programs
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ name (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ program_type (ENUM('incubator', 'accelerator', 'mentorship', 'workshop'), NOT NULL)
‚îú‚îÄ‚îÄ focus_sector (ENUM('maritime', 'fishery', 'tourism', 'digital', 'agriculture'), NOT NULL)
‚îú‚îÄ‚îÄ duration_months (INT, NULLABLE)
‚îú‚îÄ‚îÄ max_participants (INT, NULLABLE)
‚îú‚îÄ‚îÄ application_deadline (DATE, NULLABLE)
‚îú‚îÄ‚îÄ start_date (DATE, NULLABLE)
‚îú‚îÄ‚îÄ end_date (DATE, NULLABLE)
‚îú‚îÄ‚îÄ requirements (JSON, NULLABLE)
‚îú‚îÄ‚îÄ benefits (JSON, NULLABLE)
‚îú‚îÄ‚îÄ status (ENUM('draft', 'open', 'in_progress', 'completed'), DEFAULT 'draft')
‚îú‚îÄ‚îÄ coordinator_id (FK -> users.id)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 15. **BUSINESS_APPLICATIONS** (Aplikasi Program Bisnis)
```sql
business_applications
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ user_id (FK -> users.id)
‚îú‚îÄ‚îÄ program_id (FK -> business_programs.id)
‚îú‚îÄ‚îÄ business_idea_title (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ business_description (TEXT, NOT NULL)
‚îú‚îÄ‚îÄ target_market (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ financial_projection (JSON, NULLABLE)
‚îú‚îÄ‚îÄ team_members (JSON, NULLABLE)
‚îú‚îÄ‚îÄ experience (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ motivation (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ application_status (ENUM('draft', 'submitted', 'under_review', 'accepted', 'rejected'), DEFAULT 'draft')
‚îú‚îÄ‚îÄ reviewer_notes (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ reviewed_by (FK -> users.id, NULLABLE)
‚îú‚îÄ‚îÄ reviewed_at (TIMESTAMP, NULLABLE)
‚îú‚îÄ‚îÄ submitted_at (TIMESTAMP, NULLABLE)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

## üìç Geographic & Mapping System

### 16. **MAP_LAYERS** (Layer Peta)
```sql
map_layers
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ name (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ layer_type (ENUM('satellite', 'street', 'terrain', 'hybrid'), NOT NULL)
‚îú‚îÄ‚îÄ provider (VARCHAR(100), NOT NULL) -- 'mapbox', 'google', etc.
‚îú‚îÄ‚îÄ style_url (VARCHAR(500), NULLABLE)
‚îú‚îÄ‚îÄ is_default (BOOLEAN, DEFAULT false)
‚îú‚îÄ‚îÄ is_active (BOOLEAN, DEFAULT true)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 17. **POI_CATEGORIES** (Kategori Point of Interest)
```sql
poi_categories
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ name (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ icon (VARCHAR(100), NULLABLE)
‚îú‚îÄ‚îÄ color (VARCHAR(20), DEFAULT '#3b82f6')
‚îú‚îÄ‚îÄ description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ is_active (BOOLEAN, DEFAULT true)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 18. **POINTS_OF_INTEREST** (Titik Menarik di Peta)
```sql
points_of_interest
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ village_id (FK -> village_info.id)
‚îú‚îÄ‚îÄ category_id (FK -> poi_categories.id)
‚îú‚îÄ‚îÄ name (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ latitude (DECIMAL(10,8), NOT NULL)
‚îú‚îÄ‚îÄ longitude (DECIMAL(11,8), NOT NULL)
‚îú‚îÄ‚îÄ address (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ images (JSON, NULLABLE) -- array of image URLs
‚îú‚îÄ‚îÄ contact_info (JSON, NULLABLE)
‚îú‚îÄ‚îÄ operating_hours (JSON, NULLABLE)
‚îú‚îÄ‚îÄ website (VARCHAR(500), NULLABLE)
‚îú‚îÄ‚îÄ rating (DECIMAL(3,2), DEFAULT 0.00)
‚îú‚îÄ‚îÄ is_featured (BOOLEAN, DEFAULT false)
‚îú‚îÄ‚îÄ is_active (BOOLEAN, DEFAULT true)
‚îú‚îÄ‚îÄ created_by (FK -> users.id)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

## üìö Content Management

### 19. **ARTICLES** (Artikel/Blog)
```sql
articles
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ title (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ slug (VARCHAR(255), UNIQUE, NOT NULL)
‚îú‚îÄ‚îÄ excerpt (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ content (LONGTEXT, NOT NULL)
‚îú‚îÄ‚îÄ featured_image (VARCHAR(500), NULLABLE)
‚îú‚îÄ‚îÄ category (ENUM('news', 'education', 'business', 'tourism', 'maritime'), NOT NULL)
‚îú‚îÄ‚îÄ tags (JSON, NULLABLE)
‚îú‚îÄ‚îÄ author_id (FK -> users.id)
‚îú‚îÄ‚îÄ status (ENUM('draft', 'published', 'archived'), DEFAULT 'draft')
‚îú‚îÄ‚îÄ published_at (TIMESTAMP, NULLABLE)
‚îú‚îÄ‚îÄ view_count (INT, DEFAULT 0)
‚îú‚îÄ‚îÄ is_featured (BOOLEAN, DEFAULT false)
‚îú‚îÄ‚îÄ seo_title (VARCHAR(255), NULLABLE)
‚îú‚îÄ‚îÄ seo_description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 20. **MEDIA_LIBRARY** (Perpustakaan Media)
```sql
media_library
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ filename (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ original_name (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ file_path (VARCHAR(500), NOT NULL)
‚îú‚îÄ‚îÄ file_type (VARCHAR(50), NOT NULL)
‚îú‚îÄ‚îÄ file_size (BIGINT, NOT NULL)
‚îú‚îÄ‚îÄ mime_type (VARCHAR(100), NOT NULL)
‚îú‚îÄ‚îÄ dimensions (JSON, NULLABLE) -- untuk gambar: width, height
‚îú‚îÄ‚îÄ alt_text (VARCHAR(255), NULLABLE)
‚îú‚îÄ‚îÄ description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ uploaded_by (FK -> users.id)
‚îú‚îÄ‚îÄ usage_count (INT, DEFAULT 0)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

## üîî Notification & Communication

### 21. **NOTIFICATIONS** (Notifikasi User)
```sql
notifications
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ user_id (FK -> users.id)
‚îú‚îÄ‚îÄ type (VARCHAR(100), NOT NULL)
‚îú‚îÄ‚îÄ title (VARCHAR(255), NOT NULL)
‚îú‚îÄ‚îÄ message (TEXT, NOT NULL)
‚îú‚îÄ‚îÄ data (JSON, NULLABLE) -- additional notification data
‚îú‚îÄ‚îÄ action_url (VARCHAR(500), NULLABLE)
‚îú‚îÄ‚îÄ is_read (BOOLEAN, DEFAULT false)
‚îú‚îÄ‚îÄ read_at (TIMESTAMP, NULLABLE)
‚îú‚îÄ‚îÄ priority (ENUM('low', 'normal', 'high', 'urgent'), DEFAULT 'normal')
‚îú‚îÄ‚îÄ expires_at (TIMESTAMP, NULLABLE)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

### 22. **SYSTEM_SETTINGS** (Pengaturan Sistem)
```sql
system_settings
‚îú‚îÄ‚îÄ id (PK, BIGINT, AUTO_INCREMENT)
‚îú‚îÄ‚îÄ key (VARCHAR(255), UNIQUE, NOT NULL)
‚îú‚îÄ‚îÄ value (LONGTEXT, NULLABLE)
‚îú‚îÄ‚îÄ type (ENUM('string', 'number', 'boolean', 'json'), DEFAULT 'string')
‚îú‚îÄ‚îÄ category (VARCHAR(100), DEFAULT 'general')
‚îú‚îÄ‚îÄ description (TEXT, NULLABLE)
‚îú‚îÄ‚îÄ is_public (BOOLEAN, DEFAULT false)
‚îú‚îÄ‚îÄ created_at (TIMESTAMP)
‚îî‚îÄ‚îÄ updated_at (TIMESTAMP)
```

## üîó Relationships Summary

### **Primary Relationships:**
1. **users** ‚Üí **user_enrollments** ‚Üí **courses**
2. **courses** ‚Üí **course_modules** ‚Üí **learning_materials**
3. **users** ‚Üí **learning_progress** ‚Üê **learning_materials**
4. **users** ‚Üí **user_assessments** ‚Üí **assessments**
5. **assessments** ‚Üí **assessment_questions** ‚Üí **assessment_options**
6. **users** ‚Üí **business_applications** ‚Üí **business_programs**
7. **village_info** ‚Üí **transportation**, **points_of_interest**
8. **poi_categories** ‚Üí **points_of_interest**

### **Foreign Key Constraints:**
```sql
-- Course System
ALTER TABLE courses ADD FOREIGN KEY (instructor_id) REFERENCES users(id);
ALTER TABLE course_modules ADD FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE;
ALTER TABLE learning_materials ADD FOREIGN KEY (module_id) REFERENCES course_modules(id) ON DELETE CASCADE;
ALTER TABLE user_enrollments ADD FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE;
ALTER TABLE user_enrollments ADD FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE;
ALTER TABLE learning_progress ADD FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE;
ALTER TABLE learning_progress ADD FOREIGN KEY (material_id) REFERENCES learning_materials(id) ON DELETE CASCADE;

-- Assessment System
ALTER TABLE assessments ADD FOREIGN KEY (created_by) REFERENCES users(id);
ALTER TABLE assessment_questions ADD FOREIGN KEY (assessment_id) REFERENCES assessments(id) ON DELETE CASCADE;
ALTER TABLE assessment_options ADD FOREIGN KEY (question_id) REFERENCES assessment_questions(id) ON DELETE CASCADE;
ALTER TABLE user_assessments ADD FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE;
ALTER TABLE user_assessments ADD FOREIGN KEY (assessment_id) REFERENCES assessments(id);
ALTER TABLE user_answers ADD FOREIGN KEY (user_assessment_id) REFERENCES user_assessments(id) ON DELETE CASCADE;

-- Business System
ALTER TABLE business_programs ADD FOREIGN KEY (coordinator_id) REFERENCES users(id);
ALTER TABLE business_applications ADD FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE;
ALTER TABLE business_applications ADD FOREIGN KEY (program_id) REFERENCES business_programs(id);

-- Geographic System
ALTER TABLE transportation ADD FOREIGN KEY (village_id) REFERENCES village_info(id) ON DELETE CASCADE;
ALTER TABLE points_of_interest ADD FOREIGN KEY (village_id) REFERENCES village_info(id);
ALTER TABLE points_of_interest ADD FOREIGN KEY (category_id) REFERENCES poi_categories(id);

-- Content & Media
ALTER TABLE articles ADD FOREIGN KEY (author_id) REFERENCES users(id);
ALTER TABLE media_library ADD FOREIGN KEY (uploaded_by) REFERENCES users(id);
ALTER TABLE notifications ADD FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE;
```

## üìä Indexing Strategy

### **Performance Indexes:**
```sql
-- User & Authentication
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_role ON users(role);
CREATE INDEX idx_users_active ON users(is_active);

-- Course System
CREATE INDEX idx_courses_category ON courses(category);
CREATE INDEX idx_courses_status ON courses(status);
CREATE INDEX idx_courses_instructor ON courses(instructor_id);
CREATE INDEX idx_enrollments_user_course ON user_enrollments(user_id, course_id);
CREATE INDEX idx_enrollments_status ON user_enrollments(status);
CREATE INDEX idx_progress_user_material ON learning_progress(user_id, material_id);

-- Assessment System
CREATE INDEX idx_assessments_category ON assessments(category);
CREATE INDEX idx_user_assessments_user ON user_assessments(user_id);
CREATE INDEX idx_user_assessments_status ON user_assessments(status);

-- Geographic System
CREATE SPATIAL INDEX idx_poi_location ON points_of_interest(latitude, longitude);
CREATE INDEX idx_poi_category ON points_of_interest(category_id);
CREATE INDEX idx_poi_village ON points_of_interest(village_id);

-- Content & Performance
CREATE INDEX idx_articles_category ON articles(category);
CREATE INDEX idx_articles_status ON articles(status);
CREATE INDEX idx_articles_published ON articles(published_at);
CREATE INDEX idx_notifications_user_read ON notifications(user_id, is_read);
```

## üéØ Implementation Notes

### **Data Types Explanation:**
- **DECIMAL(10,8)**: Untuk latitude/longitude dengan presisi tinggi
- **JSON**: Untuk data fleksibel seperti settings, results, tags
- **ENUM**: Untuk field dengan nilai terbatas dan fixed
- **TEXT vs LONGTEXT**: TEXT untuk content pendek, LONGTEXT untuk content panjang
- **TIMESTAMP**: Automatic timezone handling untuk created_at/updated_at

### **Security Considerations:**
- Password hashing menggunakan Laravel's Hash facade
- Foreign key constraints untuk data integrity
- Soft deletes untuk data penting (bisa ditambah deleted_at column)
- Role-based access control melalui users.role

### **Scalability Features:**
- Composite indexes untuk query performance
- JSON fields untuk flexible data storage
- Separation of concerns (content, learning, assessment, business)
- Media library terpisah untuk file management

Sistem database ini mendukung semua fitur yang ada di halaman-halaman website Kosabangsa dan dapat dikembangkan sesuai kebutuhan masa depan! üöÄ
